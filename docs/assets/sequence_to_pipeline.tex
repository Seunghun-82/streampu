\documentclass{standalone}

\usepackage{tikz}
\usetikzlibrary{aff3ct}

\begin{document}
  \begin{tikzpicture}
    %%%%%%%%%%%%%%%%%%
    %% create tasks %%
    %%%%%%%%%%%%%%%%%%
    %     options                          id   coords  label               sin sout sfwd attributes
    %     -------                          --   ------  -----               --- ---- ---- ----------
    \task                                  {t1} {0, 0}  {$begin$}            {0} {1}  {0}  {"seq"};
    \task [below=4.0cm of t1]              {t12} {}     {$begin$}            {0} {1}  {0}  {"seq"};
    \task [right=1.0cm of t1]              {t2} {}      {$T_1$}             {1} {1}  {0}  {"seq"};
    \task [right=1.0cm of t12]              {t22} {}    {$T_1$}             {1} {1}  {0}  {};
    \task [right=1.0cm of t2]              {t3} {}      {$T_2$}             {0} {0}  {1}  {"seq"};
    \task [right=1.0cm of t22]              {t32} {}      {$T_2$}             {0} {0}  {1}  {};
    \task [right=1.0cm of t3]              {t4} {}      {$T_3$}             {0} {0}  {1}  {"seq"};
    \task [right=1.0cm of t32]              {t42} {}      {$T_3$}             {0} {0}  {1}  {};
    \task [right=1.0cm of t4]              {t5} {}      {$end$}             {1} {0}  {0}  {"seq"};
    \task [right=1.0cm of t42]              {t52} {}      {$end$}             {1} {0}  {0}  {"seq"};

    %%%%%%%%%%%%%%%%%%%%
    %% create modules %%
    %%%%%%%%%%%%%%%%%%%%
    %       options      task ids         id   label
    %       -------      --------         --   -----
    \module              {"t1"}           {m1} {$M_1$};
    \module              {"t12"}          {m12} {$M_1$};
    \module              {"t2"}           {m2} {$M_2$};
    \module              {"t22"}           {m22} {$M_2$};
    \module              {"t3"}           {m3} {$M_3$};
    \module              {"t32"}           {m32} {$M_3$};
    \module              {"t4"}           {m4} {$M_4$};
    \module              {"t42"}           {m42} {$M_4$};
    \module              {"t5"}           {m5} {$M_5$};
    \module              {"t52"}           {m52} {$M_5$};
 
    %%%%%%%%%%%%%%%%
    %% bind tasks %%
    %%%%%%%%%%%%%%%%
    %     options start id path                                           end id
    %     ------- -------- ----                                           ------
    \draw [bind]  (t1_so1) -- (t2_si1);
    \draw [bind]  (t2_so1) -- (t3_si1);
    \draw [bind]  (t3_so1) -- (t4_si1);
    \draw [bind]  (t4_so1) -- (t5_si1);

    \draw [bind]  (t12_so1) -- (t22_si1);
    \draw [bind]  (t22_so1) -- (t32_si1);
    \draw [bind]  (t32_so1) -- (t42_si1);
    \draw [bind]  (t42_so1) -- (t52_si1);
    
    
    

    %%%%%%%%%%%%%%%%%%%
    %% create stages %%
    %%%%%%%%%%%%%%%%%%%
    %      options                                       object ids       id   label                n_threads
    %      -------                                       ----------       --   -----                ---------
    \stage [minimum height=3.00cm]                       {"m1","m2","m3","m4","m5"}  {s1} {Simple sequence} {1}
    
    \stage [minimum height=3.00cm]                       {"m12"}  {s12} {Stage 1 } {1}
    \stage [minimum height=3.00cm]                       {"m22","m32","m42"}  {s22} {Stage 2 } {3}
    \stage [minimum height=3.00cm]                       {"m52"}  {s32} {Stage 3 } {1}
   


    %%%%%%%%%%%%%%%%%%%%%
    %% clone the tasks %%
    %%%%%%%%%%%%%%%%%%%%%
    %      options      task ids                              n clones
    %      -------      --------                              --------
    \clone []       {"t22","t32","t42"}                         {2}
    %%%%%%%%%%%%%%%%%%%%%
    %% draw the legend %%
    %%%%%%%%%%%%%%%%%%%%%
    \legend [shift={(-1.0,2.0)}]
  \end{tikzpicture}
\end{document}
